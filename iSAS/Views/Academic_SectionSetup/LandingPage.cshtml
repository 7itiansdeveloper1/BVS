@using ISas.Web.Models;
@model List<ISas.Entities.Academic.Academic_SectionSetupModels>
@{
    string _ClassName = ""; string _ClassId = ""; int _ClassStrength = 0; int rowlength = 0;
    int totalCurrentClsStrength = 0;
    if (Model != null && Model.Count > 0)
    {
        _ClassName = Model[0].Class_Name;
        _ClassId = Model[0].Class_ClassId;
        _ClassStrength = Model[0].Class_Strength;
        rowlength = Model.Count;
        totalCurrentClsStrength = Model.Sum(r => r.MaxStrength);
    }
}
<!-- /.box -->
<div class="box box-primary">
    <!-- /.box-header -->
    <div class="box-header with-border">
        <div class="box-title">
            <h5 class="box-title">Section Setup List</h5>
        </div>
    </div>
    <div class="box-body">
        <table id="example1" class="table table-bordered table-striped">
            <thead>
                <tr>
                    <th>S. No</th>
                    <th>Class</th>
                    <th>Max. Strength</th>
                    <th>Class Teacher 1</th>
                    <th>Class Teacher 2</th>
                    <th>Current Strength</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                @if (Model != null && Model.Count > 0)
                {
                    int count = 1;
                    for (int i = 0; i < Model.Count(); i++)
                    {
                        <tr>
                            <td>
                                @Html.DisplayFor(r => count)
                                @Html.HiddenFor(r => Model[i].ClassId, htmlAttributes: new { id = "ClassId_" + @i })
                                @Html.HiddenFor(r => Model[i].SectionId, htmlAttributes: new { id = "SectionId_" + @i })
                                @Html.HiddenFor(r => Model[i].CurrentStrength, htmlAttributes: new { id = "CurrentStrength_" + @i })
                            </td>
                            <td>
                                @Html.DisplayFor(r => Model[i].Class)
                            </td>
                            <td>@Html.TextBoxFor(r => Model[i].MaxStrength, htmlAttributes: new { @class = "form-control editableFeild_" + @i + "", id = "MaxStrength_" + @i, @readonly = true })</td>

                            <td>
                                <span style="display:none;">@Html.DisplayFor(r => Model[i].ClassTeacher) </span>
                                @Html.DropDownListFor(r => Model[i].CT1, new SelectList(ViewBag.teacherList, "Value", "Text", Model[i].CT1), "--Select--", htmlAttributes: new { @class = "select2 form-control editableFeild_Disabled_" + @i + "", id = "CT1_" + @i, disabled = true, style = "width:100%;" })
                            </td>
                            <td>@Html.DropDownListFor(r => Model[i].CT2, new SelectList(ViewBag.teacherList, "Value", "Text", Model[i].CT2), "--Select--", htmlAttributes: new { @class = "select2 form-control editableFeild_Disabled_" + @i + "", id = "CT2_" + @i, disabled = true, style = "width:100%;" })</td>
                            <td>@Html.DisplayFor(r => Model[i].CurrentStrength)</td>

                            <td class="text-center">
                                @if (Model[i].IsDeletable)
                                {
                                    <a href="#" onclick="DeleteSectionSetupConfirm('@i')" title="Delete Section" class="fa fa-trash btnDefaultColor"></a>
                                }
                                else
                                {
                                    <a href="#"  title="Delete Class" class="fa fa-trash btnDefaultColorFaded"></a>
                                }

                                <a href="#" onclick="EnableEditableRow('@i')" title="Edit Section" style="display:normal;" id="btnEdit_@i" class="fa fa-edit btnDefaultColor"></a>

                                <a href="#" onclick="UpdateSectionSetup('@i')" title="Save Section" style="display:none;" id="btnSave_@i" class="fa fa-check btnDefaultColor"></a>
                            </td>
                        </tr>
                        count++;
                    }
                }
            </tbody>
        </table>
    </div>
    <!-- /.box-body -->
</div>
<!-- /.box -->
<script>
    $(function () {
        $('#example1').DataTable();
        $('#hddnRowLenght').val('@rowlength');
        $('#hddnTotalClassStrength').val('@totalCurrentClsStrength');
    });
</script>