@model ISas.Entities.HR_Payroll_Entities.HR_Payroll_LeaveRegisterModels



<div class="alert alert-info alert-dismissible" id="autoHideMsgDiv" style="z-index:1;position: absolute;min-width:98%;max-width:98%;display:none;">
    @*<button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>*@
    <h4><i id="autoHideDivTitleIcon" class="icon fa fa-info"></i> <span id="autoHideDivTitle"> Alert! </span> </h4>
    <p id="autoHideDivMsg"> Info alert preview. This alert is dismissable.</p>
</div>


<div class="row">
    <div class="col-md-9">
        @using (Html.BeginForm("HR_Payroll_LeaveRegister_CRUD", "HR_Payroll_LeaveRegister", FormMethod.Post, htmlAttributes: new { }))
        {
            @Html.HiddenFor(r => Model.SelectedEmpID)
            @Html.HiddenFor(r => Model.LeaveType)
            <div class="row">
                <div class="col-xs-12 col-sm-6 col-md-2">
                    <div class="form-group">
                        <label for="" id="lblLvCode">@Html.LabelFor(r => Model.LeaveCode)</label>
                        <div class="select">
                            @Html.DropDownListFor(m => m.LeaveCode, new SelectList(Model.LeaveCodeList, "Value", "Text"), "Select", htmlAttributes: new { @class = "form-control select2", style = "width:100%;", onchange = "GetNoOfDaysCount()" })
                            @Html.ValidationMessageFor(r => Model.LeaveCode, null, htmlAttributes: new { style = "color:red;" })
                        </div>
                    </div>
                </div>
                <div class="col-xs-12 col-sm-6 col-md-4">
                    <div class="form-group">
                        <label for="" id="lblFDate">@Html.LabelFor(r => Model.FromDate)</label>
                        <div class="input-group date">
                            <div class="input-group-addon">
                                <i class="fa fa-calendar"></i>
                            </div>
                            @Html.TextBoxFor(m => m.FromDate, htmlAttributes: new { @class = "form-control pull-right date", onchange = "GetDaysBetweenDays('FromDate', 'ToDate', 'BalanceDays')" })
                            @Html.ValidationMessageFor(r => Model.FromDate, null, htmlAttributes: new { style = "color:red;" })
                        </div>
                        <!-- /.input group -->
                    </div>
                </div>

                <div class="col-xs-12 col-sm-6 col-md-4">
                    <div class="form-group">
                        <label for="" id="lblTDate">@Html.LabelFor(r => Model.ToDate)</label>
                        <div class="input-group date">
                            <div class="input-group-addon">
                                <i class="fa fa-calendar"></i>
                            </div>
                            @Html.TextBoxFor(m => m.ToDate, htmlAttributes: new { @class = "form-control pull-right date", onchange = "GetDaysBetweenDays('FromDate', 'ToDate', 'BalanceDays')" })
                            @Html.ValidationMessageFor(r => Model.ToDate, null, htmlAttributes: new { style = "color:red;" })
                        </div>
                        <!-- /.input group -->
                    </div>
                </div>

                <div class="col-xs-12 col-sm-6 col-md-2">
                    <div class="form-group">
                        <label for="" id="lblBalance">@Html.LabelFor(r => Model.BalanceDays)</label>
                        <div class="select">
                            @Html.TextBoxFor(m => m.BalanceDays, htmlAttributes: new { @class = "form-control" })
                            @Html.ValidationMessageFor(r => Model.BalanceDays, null, htmlAttributes: new { style = "color:red;" })
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <button class="btn btn-success" id="savebutton" type="button" onclick="DoAjaxPostAndMore_ApplyLeave(this)">SAVE</button>
                    <button class="btn btn-default" type="button" onclick="window.location.reload()">RESET</button>
                </div>
            </div>
        }
    </div>
    <div class="col-md-3" style="border-left:1px solid #808080;">
        <div id="localLeaveDetails" style="height:200px;overflow:auto;">
            <table class="table table-bordered table-striped  dt-responsive nowrap">
                <thead>
                    <tr>
                        <th>Head</th>
                        <th>Balance</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model.LocalLeaveList)
                    {
                        <tr>
                            <td>@Html.DisplayFor(r => item.LvCode)</td>
                            <td>@Html.DisplayFor(r => item.OpenBal)</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>
<script>
    $(function () {
        $('.date').bootstrapDP({
            autoclose: true,
            format: 'dd/mm/yyyy'
        });
    });
</script>