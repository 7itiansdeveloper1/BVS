@model ISas.Entities.FeesEntities.Fee_ConcessionModels
@using ISas.Web.Models;
@{
    int rowlength = 0;
}
<table class="table table-condensed table-hover table-responsive table-bordered" id="tblConcessionDetails">
    <thead>
        <tr>
            <th>@Html.CheckBox("chkBoxSelectAll", false, htmlAttributes: new { onchange = "fun_chekcToSelectAllRecord()" })</th>
            <th>Due Date</th>
            <th>Head Name</th>
            <th>Due</th>
            <th title="Concession Amount">Con. Amt.</th>
            <th title="Discount Amount">Disc. Amt.</th>
            <th>Paid Amt.</th>
            <th>Balance</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody>
        @if (Model != null && Model.ConsessionList != null && Model.ConsessionList.Count > 0)
        {
            rowlength = Model.ConsessionList.Count;
            for (int i = 0; i < Model.ConsessionList.Count; i++)
            {
                <tr class="editable" id="editable_@i" style="display:none;">
                    @*<td>@Html.CheckBoxFor(r => Model.ConsessionList[i].IsSelected, htmlAttributes: new { @class = "" })</td>*@
                    <td style="width:10%;">
                        @Html.HiddenFor(r => Model.ConsessionList[i].HeadId)
                        @Html.HiddenFor(r => Model.ConsessionList[i].DisplayDueDate)
                        @Html.HiddenFor(r => Model.ConsessionList[i].Amount)
                        @Html.HiddenFor(r => Model.ConsessionList[i].PaidAmount)
                        @Html.HiddenFor(r => Model.ConsessionList[i].CreditNoteRefNo)
                        @Html.HiddenFor(r => Model.ConsessionList[i].IsEditable)
                        @Html.HiddenFor(r => Model.ConsessionList[i].IsDeleteable)
                        @*@Html.DisplayFor(r => Model.ConsessionList[i].IsSelected)*@
                        @Html.DisplayFor(r => Model.ConsessionList[i].DisplayDueDate)
                    </td>
                    <td style="width:10%;">@Html.DisplayFor(r => Model.ConsessionList[i].DisplayDueDate)</td>
                    <td style="width:10%;">@Html.DisplayFor(r => Model.ConsessionList[i].HeadName)</td>
                    <td style="width:10%;">@Html.TextBoxFor(r => Model.ConsessionList[i].Amount, htmlAttributes: new { @class = "form-control", @readonly = true, tabindex = "-1" })</td>
                    <td style="width:10%;">@Html.TextBoxFor(r => Model.ConsessionList[i].ConcAmount, htmlAttributes: new { @class = "form-control", onchange = "CalculateRow(" + @i + ")" })</td>
                    <td style="width:10%;">@Html.TextBoxFor(r => Model.ConsessionList[i].DiscAmount, htmlAttributes: new { @class = "form-control", onchange = "CalculateRow(" + @i + ")" })</td>
                    <td style="width:10%;">@Html.TextBoxFor(r => Model.ConsessionList[i].PaidAmount, htmlAttributes: new { @class = "form-control", @readonly = true, tabindex = "-1" })</td>
                    <td style="width:10%;">@Html.TextBoxFor(r => Model.ConsessionList[i].Balance, htmlAttributes: new { @class = "form-control", @readonly = true, tabindex = "-1" })</td>

                    <td style="width:20%;">
                        @*@if (Model.ConsessionList[i].IsEditable)
                            {
                                <a href="#" onclick="$('#IsSingleSave').val(true); DoAjaxPostAndMore(this);" title="Save Credit Note" class="fa fa-check btnDefaultColor"></a>
                            }
                            else
                            {
                                <span title="Save Credit Note" class="fa fa-check btnDefaultColorFaded"></span>
                            }*@

                        @if (Model.ConsessionList[i].IsDeleteable)
                        {
                            <a href="#" onclick="CancelCreditNoteConfirm('@i')" title="Cancel Credit Note" class="fa fa-remove btnDefaultColor"></a>
                        }
                        else
                        {
                            <span href="#" title="Cancel Credit Note" class="fa fa-remove btnDefaultColorFaded"></span>
                        }

                        @*@if (!string.IsNullOrEmpty(Model.ConsessionList[i].TransRefNo) && Model.ConsessionList[i].TransRefNo != "0")
                            {
                                @Html.EncodedActionLink(" ", "GetFeeDocument_View", "StudentFeeDetails", new { TransRefNo = Model.ConsessionList[i].TransRefNo, Mode = "RECEIPT", erpno = Model.ConsessionList[i].ERPNo }, htmlAttributes: new { @class = "fa fa-eye btnDefaultColor", target = "_blank", title = "Go to Receipt" })
                            }
                            else
                            {
                                @Html.EncodedActionLink(" ", "GetFeeDocument_View", "StudentFeeDetails", new { TransRefNo = Model.ConsessionList[i].TransRefNo, Mode = "RECEIPT", erpno = Model.ConsessionList[i].ERPNo }, htmlAttributes: new { @class = "fa fa-eye btnDefaultColorFaded", target = "_blank", title = "Go to Receipt" })
                            }*@
                    </td>
                </tr>

                <tr id="displayOnly_@i" style="display:normal;">
                    <td>@Html.CheckBoxFor(r => Model.ConsessionList[i].IsSelected, htmlAttributes: new { @class = "minimal" })</td>
                    <td style="width:10%;">@Html.DisplayFor(r => Model.ConsessionList[i].DisplayDueDate)</td>
                    <td style="width:30%;">@Html.DisplayFor(r => Model.ConsessionList[i].HeadName)</td>
                    <td style="width:10%;">@Html.DisplayFor(r => Model.ConsessionList[i].Amount)</td>
                    <td style="width:10%;">@Html.DisplayFor(r => Model.ConsessionList[i].ConcAmount)</td>
                    <td style="width:10%;">@Html.DisplayFor(r => Model.ConsessionList[i].DiscAmount)</td>
                    <td style="width:10%;">@Html.DisplayFor(r => Model.ConsessionList[i].PaidAmount)</td>
                    <td style="width:10%;">@Html.DisplayFor(r => Model.ConsessionList[i].Balance)</td>
                    <td style="width:10%;">
                        @*@if (Model.ConsessionList[i].IsEditable)
                            {
                                <a href="#" onclick="EnableEditableRow('@i')" title="Edit Credit Note" class="fa fa-edit btnDefaultColor"></a>
                            }
                            else
                            {
                                <span href="#" title="Edit Credit Note" class="fa fa-edit btnDefaultColorFaded"></span>
                            }*@

                        @if (Model.ConsessionList[i].IsDeleteable)
                        {
                            <a href="#" onclick="CancelCreditNoteConfirm('@i')" title="Cancel Credit Note" class="fa fa-remove btnDefaultColor"></a>
                        }
                        else
                        {
                            <span title="Cancel Credit Note" class="fa fa-remove btnDefaultColorFaded"></span>
                        }

                        @*@if (!string.IsNullOrEmpty(Model.ConsessionList[i].TransRefNo) && Model.ConsessionList[i].TransRefNo != "0")
                            {
                                @Html.EncodedActionLink(" ", "GetFeeDocument_View", "StudentFeeDetails", new { TransRefNo = Model.ConsessionList[i].TransRefNo, Mode = "RECEIPT", erpno = Model.ConsessionList[i].ERPNo }, htmlAttributes: new { @class = "fa fa-eye btnDefaultColor", target = "_blank", title = "Go to Receipt" })
                            }
                            else
                            {
                                @Html.EncodedActionLink(" ", "GetFeeDocument_View", "StudentFeeDetails", new { TransRefNo = Model.ConsessionList[i].TransRefNo, Mode = "RECEIPT", erpno = Model.ConsessionList[i].ERPNo }, htmlAttributes: new { @class = "fa fa-eye btnDefaultColorFaded", target = "_blank", title = "Go to Receipt" })
                            }*@
                    </td>
                </tr>
            }
        }
    </tbody>
</table>
<script>
    $(document).ready(function () {
        $('#hddnRowLenght').val('@rowlength');
    });
  
    function fun_chekcToSelectAllRecord() {
        if ($('#chkBoxSelectAll').is(':checked')) {
            //alert('checked');
            $('.minimal').prop('checked', true);
        } else {
            //alert('not checked');
            $('.minimal').prop('checked', false);
        }
    }
</script>