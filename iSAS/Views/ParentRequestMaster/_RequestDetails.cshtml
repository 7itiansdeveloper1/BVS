@model List<ISas.Entities.DashboardEntities.DashBoard_ParentRequestMasterModel>
<table class="table table-bordered table-responsive">
    <thead>
        <tr>
            <th>Applied Date</th>
            <th>Start Date</th>
            <th>Start End</th>
            <th>Leave Days</th>
            <th>Description</th>
            <th>Status</th>
            <th>Communication</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(r => item.RequestDate)
                </td>
                <td>@Html.DisplayFor(r => item.FromDate) </td>
                <td>@Html.DisplayFor(r => item.ToDate) </td>
                <td>@Html.DisplayFor(r => item.LeaveDays) </td>
                <td class="text-left">
                    @Html.DisplayFor(r => item.RequestSubject)
                </td>
                <td>@Html.DisplayFor(r => item.RequestStatus) </td>
                <td>
                    <a title="Open Chat" class="fa fa-comments btnDefaultColor" href="#"  onclick="fun_GetRequestCommunicationDetails('@item.RequestId')" ></a>
                    @*<button type="button">
                        <i class="fa fa-comments"></i>
                    </button>*@
                    @*<input type="button" onclick="fun_GetRequestCommunicationDetails('@item.RequestId')" class="btn btn-success btn-sm" value="View" />*@
                </td>
            </tr>
        }
    </tbody>
</table>

<script>
    function fun_GetRequestCommunicationDetails(requestId) {
        $.ajax
            ({
                url: '../ParentRequestMaster/_RequestCommunicationDetails',
                type: 'GET',
                traditional: true,
                contentType: 'application/json',
                data: { RequestID: requestId },
                success: function (result) {
                    OpenChatModal(result);
                    return false;
                },
            });
        return false;
    }
</script>